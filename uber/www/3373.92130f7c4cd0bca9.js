"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3373],{3373:(A,m,a)=>{a.r(m),a.d(m,{PerfilconductorPageModule:()=>_});var p=a(6814),v=a(95),l=a(9004),d=a(3044),u=a(5861),e=a(6689),P=a(4414),b=a(457),y=a(9167);function x(i,c){if(1&i&&(e.TgZ(0,"ion-list",17)(1,"ion-item",18),e._UZ(2,"img",19),e.TgZ(3,"ion-label",20),e._uU(4),e.qZA()()()),2&i){const s=e.oxw();e.xp6(2),e.s9C("src",s.climaData.current.condition.icon,e.LSH),e.xp6(2),e.hij("",s.climaData.current.temp_c,"\xb0C")}}const C=[{path:"",component:(()=>{var i;class c{constructor(o,t,r,n,h,g){this.router=o,this.aroute=t,this.alertController=r,this.api=n,this.cdr=h,this.db=g,this.vehiculoRegistrado=!1}ngOnInit(){this.nombreUsuario="nombre random",this.correoUsuario="correo random",this.aroute.paramMap.subscribe(o=>{var t;const r=null!==(t=o.get("usuarioid"))&&void 0!==t?t:"";this.usuarioid=parseInt(r,10)||0,console.log("Usuarioid en PerfilUsuarioPage:",this.usuarioid),this.usuarioid&&this.db.buscarUsuarioPorId(this.usuarioid).then(n=>{n&&(this.nombreUsuario=n.nombre,this.correoUsuario=n.correo)}).catch(n=>{})}),this.usuarioid&&this.db.verificarVehiculoRegistrado(this.usuarioid).then(o=>{this.vehiculoRegistrado=o,console.log("pas\xe9 por ac\xe1",this.usuarioid),this.actualizarBotones()}).catch(o=>{})}logout(){var o=this;return(0,u.Z)(function*(){yield(yield o.alertController.create({header:"Cerrar sesi\xf3n",message:"\xbfEst\xe1s seguro de que quieres cerrar sesi\xf3n?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:r=>{}},{text:"S\xed",handler:()=>{o.router.navigate(["/home"])}}]})).present()})()}editProfile(){console.log("ID de Usuario P user:",this.usuarioid),this.router.navigate(["/moduser",this.usuarioid]),console.log("si toy.")}obtenerclima(){this.api.getclima().subscribe(o=>{this.climaData=o,console.log("si toy.",this.climaData),console.log("si toy.",this.climaData.current.temp_f)})}ionViewWillEnter(){this.obtenerclima()}actualizarBotones(){const o=document.getElementById("registrarVehiculoButton"),t=document.getElementById("iniciarViajeButton"),r=document.getElementById("eliminarVehiculoButton");o&&t&&(this.vehiculoRegistrado?(console.log("hay vehiculo",this.usuarioid),o.style.display="none"):(console.log("no hay vehiculo",this.usuarioid),t.disabled=!0,r.style.display="none"))}iniciarViajeComoConductor(){var o=this;return(0,u.Z)(function*(){if(o.vehiculoRegistrado)console.log("inicie el viaje ",o.usuarioid),o.router.navigate(["/mapa"]);else{const t=yield o.alertController.create({header:"Advertencia",message:"Debes registrar un veh\xedculo primero!!",buttons:["OK"]});console.log("no inicie el viaje ",o.usuarioid),yield t.present()}})()}ionViewDidEnter(){this.cargarVehiculos()}cargarVehiculos(){this.db.obtenerVehiculos().then(o=>{console.log("Datos de vehiculos obtenidos:",o)})}eliminarVehiculo(){var o=this;return(0,u.Z)(function*(){try{yield o.db.eliminarVehiculoporuserid(o.usuarioid),console.log("Datos de vehiculos borrados:"),o.cargarVehiculos()}catch(t){console.error("Error al eliminar veh\xedculo:",t)}})()}registrarVehiculo(){var o=this;return(0,u.Z)(function*(){try{(yield o.db.verificarVehiculoRegistrado(o.usuarioid))?yield(yield o.alertController.create({header:"Registro de Veh\xedculo",message:"Ya tienes un veh\xedculo registrado.",buttons:["OK"]})).present():yield(yield o.alertController.create({header:"Registro de Veh\xedculo",message:"Completa los datos del veh\xedculo:",inputs:[{name:"patente",type:"text",placeholder:"Patente"},{name:"asientos",type:"number",placeholder:"Cantidad de Asientos"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Registrar",handler:n=>{const h={patente:n.patente,asientos:n.asientos,usuarioid:o.usuarioid},g=o.validarPatente(n.patente),f=o.validarAsientos(n.asientos);g||f?g?f?o.db.registrarVehiculo(h).then(()=>{o.mostrarAlerta("Veh\xedculo Agregado","El veh\xedculo ha sido registrado correctamente."),o.actualizarBotones()}).catch(Z=>{console.error("Error al registrar veh\xedculo:",Z)}):o.mostrarAlerta("Error","Ingrese un n\xfamero de asientos v\xe1lido (entre 2 y 20)."):o.mostrarAlerta("Error","La patente ingresada no es v\xe1lida."):o.mostrarAlerta("Error","Por favor, ingrese valores v\xe1lidos para la patente y el n\xfamero de asientos.")}}]})).present()}catch(t){console.error("Error al verificar veh\xedculo registrado:",t)}})()}mostrarAlerta(o,t){var r=this;return(0,u.Z)(function*(){yield(yield r.alertController.create({header:o,message:t,buttons:["OK"]})).present()})()}validarPatente(o){return/^[a-zA-Z]{4}\d{2}$/.test(o)}validarAsientos(o){return o>=1&&o<=15}}return(i=c).\u0275fac=function(o){return new(o||i)(e.Y36(d.F0),e.Y36(d.gz),e.Y36(P.Br),e.Y36(b.G),e.Y36(e.sBO),e.Y36(y.A))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-perfilconductor"]],decls:25,vars:4,consts:[[1,"content",3,"fullscreen"],[1,"background-gradient"],[1,"center-container"],[1,"profile-card"],[1,"custom-item"],["name","settings","slot","start","color","primary",1,"settings-icon",3,"click"],["name","log-out","slot","end","color","primary",1,"logout-icon",3,"click"],["class","clima-container",4,"ngIf"],[1,"profile-image-container"],[1,"profile-image"],["src","uber\\src\\assets\\img\\graduation-1345143_640.png"],[1,"profile-name"],[1,"profile-email"],[1,"login-buttons"],["id","iniciarViajeButton","expand","full","color","primary",3,"click"],["id","registrarVehiculoButton","expand","full","color","primary",3,"click"],["id","eliminarVehiculoButton","expand","full","color","danger",3,"click"],[1,"clima-container"],[1,"clima-item"],["slot","start","alt","Clima Icon",1,"clima-icon",3,"src"],["slot","end","color","primary"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-content",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"ion-card",3)(4,"ion-item",4)(5,"ion-icon",5),e.NdJ("click",function(){return t.editProfile()}),e._uU(6,"Edit Perfil"),e.qZA(),e.TgZ(7,"ion-icon",6),e.NdJ("click",function(){return t.logout()}),e.qZA()(),e.TgZ(8,"ion-card-header"),e.YNc(9,x,5,2,"ion-list",7),e.qZA(),e.TgZ(10,"ion-card-content")(11,"div",8)(12,"div",9),e._UZ(13,"ion-img",10),e.qZA()(),e.TgZ(14,"div",11),e._uU(15),e.qZA(),e.TgZ(16,"div",12),e._uU(17),e.qZA(),e.TgZ(18,"div",13)(19,"ion-button",14),e.NdJ("click",function(){return t.iniciarViajeComoConductor()}),e._uU(20," Iniciar Viaje Como Conductor "),e.qZA(),e.TgZ(21,"ion-button",15),e.NdJ("click",function(){return t.registrarVehiculo()}),e._uU(22," Registrar Vehiculo "),e.qZA(),e.TgZ(23,"ion-button",16),e.NdJ("click",function(){return t.eliminarVehiculo()}),e._uU(24," Eliminar Veh\xedculo "),e.qZA()()()()()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(9),e.Q6J("ngIf",t.climaData),e.xp6(6),e.Oqu(t.nombreUsuario),e.xp6(2),e.Oqu(t.correoUsuario))},dependencies:[p.O5,l.YG,l.PM,l.FN,l.Zi,l.W2,l.gu,l.Xz,l.Ie,l.Q$,l.q_],styles:['@charset "UTF-8";ion-card.profile-card[_ngcontent-%COMP%]{width:90%;height:65%;margin:auto;text-align:center;background-color:rgba(255,255,255,.9);border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,.1)}ion-card.profile-card[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:50%;background:linear-gradient(to bottom,#00b894,#0984e3);width:100px;height:100px;margin:0 auto 10px}ion-card.profile-card[_ngcontent-%COMP%]   .profile-email[_ngcontent-%COMP%]{color:rgba(0,0,0,.6)}.background-gradient[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#00b894,#0984e3);z-index:-1}.center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-button[_ngcontent-%COMP%]{margin-top:10px}ion-list.clima-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;height:40px;border-radius:10px}ion-item.clima-item[_ngcontent-%COMP%]{display:flex;align-items:center}ion-label[_ngcontent-%COMP%]{display:flex;align-items:center}img.clima-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:10px}.custom-button[_ngcontent-%COMP%]{white-space:normal;text-align:center;font-size:16px;padding:12px;border-radius:10px}.login-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:10px}.login-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{white-space:normal;width:90%;margin-top:10px;border-radius:10px;font-size:10px}']}),c})()}];let V=(()=>{var i;class c{}return(i=c).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(C),d.Bz]}),c})(),_=(()=>{var i;class c{}return(i=c).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,v.u5,l.Pc,V]}),c})()}}]);