"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4487],{4487:(T,m,l)=>{l.r(m),l.d(m,{RegistroadminPageModule:()=>U});var d=l(6814),c=l(95),t=l(9004),_=l(3044),g=l(5861),i=l(6689),p=l(9167);function h(e,s){if(1&e&&(i.TgZ(0,"ion-select-option",13),i._uU(1),i.qZA()),2&e){const n=s.$implicit;i.Q6J("value",n.id),i.xp6(1),i.Oqu(n.nomrol)}}function P(e,s){if(1&e){const n=i.EpF();i.TgZ(0,"ion-item")(1,"ion-label")(2,"h2"),i._uU(3),i.qZA(),i.TgZ(4,"p"),i._uU(5),i.qZA(),i.TgZ(6,"p"),i._uU(7),i.qZA()(),i.TgZ(8,"ion-buttons",6)(9,"ion-item")(10,"ion-label"),i._uU(11,"Rol:"),i.qZA(),i.TgZ(12,"ion-select",7),i.NdJ("ngModelChange",function(r){i.CHM(n);const a=i.oxw();return i.KtG(a.nuevoRolId=r)}),i.YNc(13,h,2,2,"ion-select-option",8),i.qZA()(),i.TgZ(14,"ion-item")(15,"ion-button",9),i.NdJ("click",function(){const a=i.CHM(n).$implicit,u=i.oxw();return i.KtG(u.actualizarRolUsuario(a.usuarioid,u.nuevoRolId))}),i._UZ(16,"ion-icon",10),i._uU(17," Actualizar Rol "),i.qZA()(),i.TgZ(18,"ion-item")(19,"ion-button",11),i.NdJ("click",function(){const a=i.CHM(n).$implicit,u=i.oxw();return i.KtG(u.eliminarUsuario(a.usuarioid))}),i._UZ(20,"ion-icon",12),i._uU(21," Eliminar Usuario "),i.qZA()()()()}if(2&e){const n=s.$implicit,o=i.oxw();i.xp6(3),i.AsE("",n.nombre," ",n.apellido,""),i.xp6(2),i.hij("Correo: ",n.correo,""),i.xp6(2),i.hij("Rol: ",n.rolid,""),i.xp6(5),i.Q6J("ngModel",o.nuevoRolId),i.xp6(1),i.Q6J("ngForOf",o.roles)}}function f(e,s){if(1&e&&(i.TgZ(0,"ion-item")(1,"ion-label"),i._uU(2),i.qZA()()),2&e){const n=s.$implicit;i.xp6(2),i.AsE("Numero Rol: ",n.nomrol," Nombre Rol: ",n.nomrol,"")}}function R(e,s){if(1&e){const n=i.EpF();i.TgZ(0,"ion-item")(1,"ion-label"),i._uU(2),i.qZA(),i.TgZ(3,"ion-button",11),i.NdJ("click",function(){const a=i.CHM(n).$implicit,u=i.oxw();return i.KtG(u.eliminarPregunta(a.idpreguntas))}),i._UZ(4,"ion-icon",12),i.qZA()()}if(2&e){const n=s.$implicit;i.xp6(2),i.Oqu(n.pregunta)}}const Z=[{path:"",component:(()=>{var e;class s{constructor(o){this.servicioDB=o,this.usuarios=[],this.pregunta3=[],this.nuevaPregunta="",this.roles=[]}ionViewDidEnter(){this.loadRoles(),this.cargarUsuarios(),this.cargarPreguntas()}loadRoles(){this.servicioDB.obtenerRoles().then(o=>{this.roles=o})}cargarUsuarios(){this.servicioDB.obtenerUsuarios().then(o=>{console.log("Datos de usuarios obtenidos:",o),this.usuarios=o})}cargarPreguntas(){this.servicioDB.obtenerPreguntas().then(o=>{this.pregunta3=o})}eliminarUsuario(o){var r=this;return(0,g.Z)(function*(){try{yield r.servicioDB.eliminarUsuario(o),r.cargarUsuarios()}catch(a){console.error("Error al eliminar usuario:",a)}})()}eliminarPregunta(o){var r=this;return(0,g.Z)(function*(){try{yield r.servicioDB.eliminarPregunta(o),console.log("Datos de preguntas borrados:"),r.cargarPreguntas()}catch(a){console.error("Error al eliminar pregunta:",a)}})()}agregarPregunta(){var o=this;return(0,g.Z)(function*(){try{""!==o.nuevaPregunta.trim()&&(yield o.servicioDB.insertarPregunta(o.nuevaPregunta),o.cargarPreguntas(),o.nuevaPregunta="")}catch(r){console.error("Error al agregar pregunta:",r)}})()}actualizarRolUsuario(o,r){this.servicioDB.actualizarRolUsuario(o,r).then(()=>{console.log("Rol actualizado con \xe9xito."),this.servicioDB.obtenerUsuarios().then(a=>{this.usuarios=a})}).catch(a=>{console.error("Error al actualizar el rol:",a)})}ngOnInit(){}}return(e=s).\u0275fac=function(o){return new(o||e)(i.Y36(p.A))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-registroadmin"]],decls:21,vars:4,consts:[["color","primary"],[4,"ngFor","ngForOf"],["color","primary","sticky",""],["position","floating"],["required","",3,"ngModel","ngModelChange"],["expand","full",3,"click"],["slot","end"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["color","primary","fill","clear",3,"click"],["name","refresh"],["color","danger","fill","clear",3,"click"],["name","trash"],[3,"value"]],template:function(o,r){1&o&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3," Lista de Registros "),i.qZA()()(),i.TgZ(4,"ion-content")(5,"ion-list")(6,"ion-item-divider",0),i._uU(7," Usuarios "),i.qZA(),i.YNc(8,P,22,6,"ion-item",1),i.TgZ(9,"ion-item-divider",0),i._uU(10," Roles "),i.qZA(),i.YNc(11,f,3,2,"ion-item",1),i.TgZ(12,"ion-item-divider",2),i._uU(13," Preguntas "),i.qZA(),i.YNc(14,R,5,1,"ion-item",1),i.TgZ(15,"ion-item")(16,"ion-label",3),i._uU(17,"Nueva Pregunta"),i.qZA(),i.TgZ(18,"ion-input",4),i.NdJ("ngModelChange",function(u){return r.nuevaPregunta=u}),i.qZA()(),i.TgZ(19,"ion-button",5),i.NdJ("click",function(){return r.agregarPregunta()}),i._uU(20,"Agregar Pregunta"),i.qZA()()()),2&o&&(i.xp6(8),i.Q6J("ngForOf",r.usuarios),i.xp6(3),i.Q6J("ngForOf",r.roles),i.xp6(3),i.Q6J("ngForOf",r.pregunta3),i.xp6(4),i.Q6J("ngModel",r.nuevaPregunta))},dependencies:[d.sg,c.JJ,c.Q7,c.On,t.YG,t.Sm,t.W2,t.Gu,t.gu,t.pK,t.Ie,t.rH,t.Q$,t.q_,t.t9,t.n0,t.wd,t.sr,t.QI,t.j9]}),s})()}];let v=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[_.Bz.forChild(Z),_.Bz]}),s})(),U=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[d.ez,c.u5,t.Pc,v]}),s})()}}]);